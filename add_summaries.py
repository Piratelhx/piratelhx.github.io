import os
import re

# å®šä¹‰æ¯ç¯‡æ–‡ç« çš„æ‘˜è¦
article_summaries = {
    "2024-05-20-ai-landscape-after-google-io.md": "Google I/O 2024é‡æ–°å®šä¹‰äº†AIæ ¼å±€ï¼šGemini 1.5 Proçš„200ä¸‡tokenä¸Šä¸‹æ–‡çª—å£ã€AIæœç´¢çš„èŒƒå¼è½¬å˜ï¼Œä»¥åŠå¯¹æ•´ä¸ªè¡Œä¸šç«äº‰æ ¼å±€çš„æ·±è¿œå½±å“ã€‚æ·±åº¦è§£æGoogleå¦‚ä½•é€šè¿‡æŠ€æœ¯åˆ›æ–°é‡å¡‘æˆ‘ä»¬ä¸ä¿¡æ¯äº¤äº’çš„æ–¹å¼ã€‚",
    
    "2024-06-04-ai-ui-tension.md": "AIæ—¶ä»£çš„UIè®¾è®¡å“²å­¦ï¼šå½“äººå·¥æ™ºèƒ½è®©ç•Œé¢å˜å¾—æç®€ï¼Œæˆ‘ä»¬æ˜¯å¦çœŸçš„åªéœ€è¦ä¸€ä¸ªå¯¹è¯æ¡†ï¼Ÿæ¢è®¨äººæ€§åŒ–ä½“éªŒä¸ç”¨æˆ·æŒæ§æ„Ÿä¹‹é—´çš„å¾®å¦™å¹³è¡¡ï¼Œé‡æ–°å®šä¹‰æ™ºèƒ½æ—¶ä»£çš„äº¤äº’è®¾è®¡ã€‚",
    
    "2024-06-09-product-manager-cultivation.md": "ç®—æ³•çš„å°½å¤´æ˜¯äº§å“çš„å¿ƒæ³•ï¼šåœ¨AIæŠ€æœ¯æ—¥æ–°æœˆå¼‚çš„æ—¶ä»£ï¼Œäº§å“ç»ç†å¦‚ä½•åœ¨æŠ€æœ¯æµªæ½®ä¸­ä¿æŒåˆå¿ƒï¼Ÿä»ç”¨æˆ·éœ€æ±‚åˆ°å•†ä¸šä»·å€¼ï¼Œæ¢ç´¢äº§å“æ€ç»´çš„æœ¬è´¨å’Œä¿®ç‚¼ä¹‹é“ã€‚",
    
    "2024-06-15-ai-product-manager.md": "AIäº§å“ç»ç†åˆ°åº•æ˜¯é£å£è¿˜æ˜¯æ³¡æ²«ï¼Ÿä»å¸‚åœºéœ€æ±‚æ¿€å¢åˆ°è§’è‰²å®šä½æ¨¡ç³Šï¼Œä»æ ¸å¿ƒèƒ½åŠ›è¦æ±‚åˆ°æœªæ¥å‘å±•è¶‹åŠ¿ï¼Œå…¨é¢å‰–æè¿™ä¸ªå¤‡å—å…³æ³¨çš„æ–°å…´èŒä½ï¼Œä¸ºæ±‚èŒè€…å’Œä¼ä¸šæä¾›ç†æ€§çš„æ€è€ƒæ¡†æ¶ã€‚",
    
    "2024-07-17-seven-habits.md": "ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹æ·±åº¦è§£è¯»ï¼šä»ä¸ªäººæˆé•¿åˆ°å›¢é˜Ÿåä½œï¼Œå²è’‚èŠ¬Â·æŸ¯ç»´çš„ç»å…¸ç†è®ºå¦‚ä½•æŒ‡å¯¼ç°ä»£èŒåœºäººå£«å®ç°çœŸæ­£çš„æˆåŠŸï¼Ÿä¸ƒä¸ªä¹ æƒ¯çš„å®è·µæŒ‡å—å’Œç°ä»£åº”ç”¨ã€‚",
    
    "2024-07-27-sam-altman-y-combinator-speech.md": "Sam Altmançš„AIæœªæ¥è“å›¾ï¼šOpenAI CEOåœ¨Y Combinatorçš„æ ‡å¿—æ€§æ¼”è®²ä¸­ï¼Œå¦‚ä½•æç»˜äººå·¥æ™ºèƒ½çš„å‘å±•è½¨è¿¹ï¼Ÿä»æŠ€æœ¯çªç ´åˆ°ç¤¾ä¼šå½±å“ï¼Œè§£æAIé¢†åŸŸé¡¶å°–æ€æƒ³å®¶çš„å‰ç»æ´å¯Ÿã€‚",
    
    "2024-07-27-software-3.0-karpathy.md": "è½¯ä»¶3.0æ—¶ä»£æ¥ä¸´ï¼šAndrej Karpathyæ·±åº¦è§£æAIå¦‚ä½•é‡æ–°å®šä¹‰ç¼–ç¨‹èŒƒå¼ã€‚ä»ä¼ ç»Ÿç¼–ç¨‹åˆ°ç¥ç»ç½‘ç»œï¼Œä»ä»£ç é€»è¾‘åˆ°æ•°æ®é©±åŠ¨ï¼Œæ¢ç´¢è½¯ä»¶å¼€å‘çš„é©å‘½æ€§å˜é©ã€‚",
    
    "2024-07-28-elon-musk-thought-blueprint.md": "åŸƒéš†Â·é©¬æ–¯å…‹çš„æ€æƒ³è“å›¾ï¼šä»ç¬¬ä¸€æ€§åŸç†åˆ°æ˜Ÿé™…æ–‡æ˜ï¼Œè§£ç è¿™ä½ç§‘æŠ€ç‹‚äººçš„æ€ç»´æ¨¡å¼ã€‚å¦‚ä½•ç”¨åº•å±‚é€»è¾‘é‡æ„å¤æ‚é—®é¢˜ï¼Œå®ç°ä»0åˆ°1çš„çªç ´æ€§åˆ›æ–°ï¼Ÿ",
    
    "2024-07-28-manus-context-engineering.md": "æ„å»ºèªæ˜Agentçš„ç§˜å¯†æ­¦å™¨ï¼šManuså›¢é˜Ÿçš„ä¸Šä¸‹æ–‡å·¥ç¨‹å®è·µå…¨æ­ç§˜ã€‚ä¸ºä»€ä¹ˆä¸è®­ç»ƒæ¨¡å‹è€Œè¦è®­ç»ƒä¸Šä¸‹æ–‡ï¼Ÿä»KVç¼“å­˜ä¼˜åŒ–åˆ°å·¥å…·ç®¡ç†ï¼Œæ·±åº¦è§£æAIä»£ç†ç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯ã€‚",
    
    "2024-12-15-rag-system-optimization.md": "RAGç³»ç»Ÿæ„å»ºå®Œå…¨æŒ‡å—ï¼šä»æ–‡æ¡£å¤„ç†ã€å‘é‡åŒ–åˆ°æ£€ç´¢ä¼˜åŒ–ï¼Œä»ç”Ÿæˆè´¨é‡æ§åˆ¶åˆ°æ€§èƒ½è¯„ä¼°ï¼Œæ·±å…¥è§£ææ£€ç´¢å¢å¼ºç”ŸæˆæŠ€æœ¯çš„æ ¸å¿ƒè¦ç´ å’Œå®æ–½æœ€ä½³å®è·µï¼ŒåŠ©ä½ æ„å»ºé«˜è´¨é‡çš„AIçŸ¥è¯†é—®ç­”ç³»ç»Ÿã€‚"
}

def add_description_to_markdown(file_path, description):
    """ä¸ºmarkdownæ–‡ä»¶æ·»åŠ descriptionå­—æ®µ"""
    with open(file_path, 'r', encoding='utf-8') as f:
        content = f.read()
    
    # æŸ¥æ‰¾front matterçš„ç»“æŸä½ç½®
    pattern = r'^---\n(.*?)\n---'
    match = re.search(pattern, content, re.DOTALL)
    
    if match:
        front_matter = match.group(1)
        # åœ¨tagsè¡Œåæ·»åŠ description
        if 'description:' not in front_matter:
            new_front_matter = front_matter + f'\ndescription: "{description}"'
            new_content = content.replace(match.group(0), f'---\n{new_front_matter}\n---')
            
            with open(file_path, 'w', encoding='utf-8') as f:
                f.write(new_content)
            print(f"âœ… å·²ä¸º {os.path.basename(file_path)} æ·»åŠ æ‘˜è¦")
        else:
            print(f"âš ï¸  {os.path.basename(file_path)} å·²æœ‰æ‘˜è¦ï¼Œè·³è¿‡")
    else:
        print(f"âŒ æ— æ³•è§£æ {os.path.basename(file_path)} çš„front matter")

def main():
    posts_dir = "d:/project/piratelhx.github.io/_posts"
    
    print("ğŸš€ å¼€å§‹ä¸ºåšå®¢æ–‡ç« æ·»åŠ æ‘˜è¦...\n")
    
    for filename, description in article_summaries.items():
        file_path = os.path.join(posts_dir, filename)
        if os.path.exists(file_path):
            add_description_to_markdown(file_path, description)
        else:
            print(f"âŒ æ–‡ä»¶ä¸å­˜åœ¨: {filename}")
    
    print("\nğŸ‰ æ‘˜è¦æ·»åŠ å®Œæˆï¼ç°åœ¨æ¯ç¯‡æ–‡ç« éƒ½æœ‰äº†å¸å¼•äººçš„æ‘˜è¦ã€‚")

if __name__ == "__main__":
    main()